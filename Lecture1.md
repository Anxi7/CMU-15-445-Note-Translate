# Lecture1 关系模型和关系代数

## 1. 数据库

**数据库**(DB)是对现实世界中某些方面进行建模的一个组织有序的、相互关联的数据集合  
人们通常将数据库与数据库管理系统相混淆。实际上，**数据库管理系统**(DBMS)是用来管理数据库的软件，而数据库则是数据的集合  
考虑一个建模数字音乐商店的数据库。该数据库中存储了艺人的信息以及他们发行了哪些专辑

## 2. 扁平文件稻草人

> 背景简介:  
> *稻草人体系结构* 通常指代一种简单、脆弱或者不完整的系统结构或架构。这个比喻源自于农田中的稻草人，它们被用来吓走鸟类等可能危害庄稼的动物，但*实际上并没有真正的功能*，只是一种虚设
>
> 在数据库领域，*flat file strawman* 通常指的是一种简单的、基于文本文件的数据存储方法，被视为在处理数据时不够灵活、不够高效的一种解决方案，强调了数据存储在扁平的文本文件中的局限和不足之处
>
> *扁平文件* 是一种简单的数据存储格式，通常以文本文件的形式存储，每行代表一个记录，字段之间可能使用特定的分隔符(如逗号、制表符等)进行分隔

在flat file strawman中，数据库被存储为由DBMS管理的逗号分隔值(comma-sparated value, CSV)文件。每一个实体都存储在自己独有的文件中。应用程序每次想要读取或更新记录时都必须解析文件。

      CSV文件是一种常见的文本文件格式，用于存储表格数据
      在CSV文件中，每一行代表表格中的一行数据，而每一列的数据则通过逗号或其他分隔符进行分隔
      CSV文件通常被用于在不同的程序之间传输数据，因为它是一种简单、通用的文件格式，几乎所有电子表格软件和数据库系统都能够读取和生成CSV文件

继续之前的数字音乐商店的例子，这里有两个文件：一个用于艺人，一个用于专辑。  

每个实体都有自己的属性集合，因此在每个文件中，不同的record通过换行分隔，而record中的每个相应属性通过逗号分隔。  

例如：艺人有名字、年龄、祖国属性，同时，专辑有名字、创作者和发行年份属性。  

下面是一个使用(name, year, country)模式存储艺人信息的CSV文件实例。

    Wu-Tang Clan, 1992, USA
    Notorious BIG, 1992, USA
    GZE, 1990, USA

- 扁平文件存在的问题
  - 数据完整性(Data Integrity)
    - 我们如何确保每个专辑条目中的艺人都是相同的？
    - 如果有人用无效的字符串覆盖了专辑年份怎么办？
    - 如果一个专辑由多个艺人共同完成怎么办？
    - 当我们删除有专辑的艺人会发生什么？
  - 实现(Implementation)
    - 我们应该如何找到特定的record
    - 如果我们现在想开发一个使用同一数据库的新应用应该怎么办？
    - 如果两个线程试图同时写入同一文件应该怎么办？ - 并发处理
  - 持久性(Durability)
    - 如果在我的程序更新一个record时，机器损坏了怎么办？
    - 如果我们想要在多台机器上复用同一数据库以获得高可用性怎么办？

## 3. 数据库管理系统(DBMS)

数据库管理系统(DBMS)是一个允许应用程序在一个数据库中存储和分析信息的软件。通用DBMS的设计目的是允许根据某种数据模型定义、创建、查询、更新和管理数据库。  

在数据库中，*data model*(数据模型)是用来描述数据的概念集合(描述数据、数据联系、数据语义及一致性约束)。例如：关系型(最常见), NoSQL(键值对、图), 数组/矩阵/向量等。  

*Schema*(模式)是基于data model的对特定数据集合的描述
